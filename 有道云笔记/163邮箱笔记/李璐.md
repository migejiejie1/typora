```shell
（1）背景

   由于Linux系统是多用户多的，所以文件系统类型多样化是在所难免的。从ext2开始，是将文件属性和文件内容分开存储的，分别由inode和block来负责。
（2）inode

   用于存储文件的各属性，包括：

    - 所有者信息：文件的owner，group；

    - 权限信息：read、write和excite；

    -时间信息：建立或改变时间（ctime）、最后读取时间（atime）、最后修改时间（mtime）；

    - 标志信息：一些flags；

    - 内容信息：type，size，以及相应的block的位置信息。

   注意：不记录文件名或目录名，文件名或目录名记录在文件所在目录对应的block里。

（3）block

   用来存储文件的内容。

（4）创建目录或文件

   当创建一个目录时，文件系统会为该目录分配一个inode和至少一个block。该inode记录该目录的属性，并指向那块block。该block记录该目录下相关联的文件或目录的关联性和名字。

   当创建一个文件时，文件系统会为该文件分配至少一个inode和与该文件大小相对应的数量的block。该inode记录该文件的属性，并指向block。

   如果一个目录中的文件数太多，以至于1个block容纳不下这么多文件时，Linux的文件系统会为该目录分配更多的block。

   （各block之间形成链表）

（5）读取目录或文件

   当我们告知操作系统一个文件的路径后，操作系统是如何找到这个文件的呢？首先操作系统会调用文件系统的相应接口，接下来：

   递归说法：当读取一个文件或目录X时，提供给文件系统的是一个路径P。文件系统会先读取X所在的目录D的inode_d（注意这里，其实是这一操作的递归过程），通过inode_d获得其对应的block_d，在block_d中通过已知的X的名称，查询到X的inode_x。

    迭代说法；如果读取的是/x1/x2/x3/x4/x5这个文件，则先读取根目录的inode_root，然后找到inode_root对应的block_root，在block_root中根据x1这个名字找到x1对应的inode_x1，然后找到inode_x1对应的block_x1，在block_x1中根据x2这个名字找到inode_x2，再找到block_x2，然后根据x3找到inode_x3，再block_x3，根据x4找到inode_x4，再block_x4，再根据x5找到inode_x5，再block_x5，就读取到我们要的x5的内容了。





一、什么是数据流重定向

在说数据流重定向之前，先来说说数据流的概念吧。数据流分为三种：标准输入（stdin），标准输出（stdout）和标准错误输出（stderr）。

简单来说，标准输出指的是命令执行所回传的正确信息，而标准错误输出指的是命令执行失败后，所回传的错误信息。这些信息默认是打印在屏幕上的。

那么什么时数据流重定向呢？从字面上理解就是改变数据流的流向，使之流向指定的文件或设备。例如，把执行命令所回传的正确信息（标准输出信息）流向一个文件，而将所回传的错误信息（标准错误输出）流向别一个文件，并把这两个文件的信息保存下来，而在屏幕上不出现任何该命令执行所回传的信息。

标准输出数据流重定向
把由cat 1.text命令所产生的直接输出到屏幕上的信息输出到文件2.text中，并保存。而且你可以看到，原本应在屏幕上输出的信息并没有输出到屏幕上，因为它输出到了文件2.text中。
值得注意的是，如果2.text文件不存在于当前目录下，系统则会自动创建这个文件；如果这个文件已经存在于当前目录下，那么系统就会先把这个文件中的内容清空，然后再将数据写入到该文件，也就是说若以>输出到一个已存在的文件，则这个文件的内容将会被覆盖。
那有没有什么方法能不让文件内容被覆盖呢？当然就，那就是>>，这也就是>与>>的区别。数据将追加到该文件的末尾。


标准错误输出数据流重定向
标准错误输出的使用和标准输出的使用大同小异


标准输入数据流重写向
在标准输入中，<代表将原来需要由键盘输入的数据改由文件内容来替代，<<则代表结束输入。
cat > 1 < 2   用2的内容去填充1
cat > 1 <<"2" 输入2回车表示结束输入，自动退出。

linux 文件属性
权限    连接数 所有者 用户组 文件容量   日期    目录/文件名
drwxr-xr-x. 2  root   root  4096   Jul 7 00:16  dis/a.text

d		rwx	r-x	r-x
文件类型	拥有者  用户组  其他

r(可读)		w（可写）	x（可执行）
r：4   w：2   x：1   -   0
rwxr-xr--可以表示为754

第一个字符表示文件类型，而文件类型主要有：
[d]：目录
[-]：文件
[l]：连接文件
[b]：设备文件里面的可供存储的接口设备
[c]：设备文件里面的串行端口设备


文件特殊权限：SUID,SGID,SBIT
1）SUID（Set UID）
当s这个标志出现在文件所有者的x权限上时，简称SUID的特殊权限。
基本上SUID具有如下的限制和功能：
a、SUID权限仅对二进制程序有效，不能用在shell script上面，对目录也是无效的；
b、执行者对于该程序需要具有x的可执行权限；
c、本权限在执行该程序的过程中有效；
d、执行者将具有该程序所有者的权限；

其他用户（Others）要有对其进行读和执行的权限
在执行passwd这个二进制程序时，普通的用户将会获得passwd这个程序的所有者的权限，即root对该程序的权限，而不是Others或用户组的权限；
但是这个权限仅在passwd这个程序执行的过程中才有效，程序执行完毕之后，普通用户就不再拥有这种权限了；

2）SGID
当s出现在用户组的x时则称为Set GID，即SGID。SGID可以针对文件和目录来设置
对于文件来说，SGID有如下限制和功能：
a、SGID对二进制程序有用；
b、程序执行者对于该程序来说，需要备x的权限；
c、执行者在执行的过程中将会获得该程序用户组的支持。
而SGID可用于目录，对于目录来说，SGID有如下的限制和功能：
a、用户若对于此目录具有r与x的权限，该用户能够进入此目录；
b、用户在此目录下的有效用户组将会变成该目录的用户组；
c、若用户在此目录下具有w的权限，则用户所创建的新文件的用户组与此目录的用户组相同。

3）SBIT
SBIT只针对目录有效，它对目录的作用是：
当用户对于此目录具有w，x权限，即具有定稿的权限时，用户在该目录下创建文件或目录，只有自己与root才有权利删除该文件。

文件的三种特殊权限也可以用数学表示，4为SUID，2为SGID，1为SBIT，如-rwsr-xr-x，按照前面的计算我们知道，原先为755，由于它有SUID特殊权限，所以就变成了4755了。

```

